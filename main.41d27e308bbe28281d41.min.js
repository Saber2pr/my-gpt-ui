(()=>{"use strict";var e,t,n,r={67652:(e,t,n)=>{n(65629),n(41978),n(93145),n(82504),n(34409),n(26675),n(23690),n(4634),n(13331),n(42628),n(5580),n(17727);var r=n(45626),o=n(94572),a=n(77082),i=n(62980),l=n(57194),c=n(15781),u=n(35466),s=n(46116),f=n(64888),d=n(7389),p=n(44974),m=n(72465),h=n(92862),v=n(56410),b=n(30578),g=(n(77588),n(30667),n(69291),n(76844),n(10925),"thread-set-title");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){var t=(e.match(/[\u4e00-\u9fa5]/g)||[]).length,n=e.length-t;return Math.ceil(1.8*t+1.3*n)}function P(e,t,n,r){var o=w(e);if(t&&t>0&&o.length>t){var a=o[0];o="system"===a.role?[a].concat(w(o.slice(-(t-1)))):o.slice(-t)}if(n&&n>0){var i=o[0],l="system"===i.role,c=l?o.slice(1):o;if(c.reduce((function(e,t){return e+t.content.length}),0)+(l?i.content.length:0)>n){var u=Math.max(500,Math.floor(.2*n)),s=null;l&&(s=i.content.length>u?x(x({},i),{},{content:i.content.substring(0,u)+"..."}):i);for(var f=w(c),d=f.reduce((function(e,t){return e+t.content.length}),0),p=s?s.content.length:0;f.length>0&&d+p>n;){var m=f.shift();m&&(d-=m.content.length)}if(s&&d+s.content.length>n){var h=Math.max(200,n-d-100);s.content.length>h&&(s=x(x({},s),{},{content:s.content.substring(0,h)+"..."}))}o=s?[s].concat(w(f)):f}}var v=r||3500;if(v>0&&o.reduce((function(e,t){return e+k(t.content)}),0)>v){for(var b=o[0],g="system"===b.role,y=g?b:null,E=g?o.slice(1):o,O=y?Math.min(k(y.content),800):0,P=w(E),j=P.reduce((function(e,t){return e+k(t.content)}),0);P.length>0&&j+O>v;){var Z=P.shift();Z&&(j-=k(Z.content))}var C=y;if(y&&j+O>v){var S=Math.max(200,v-j-100),M=y.content;if(k(M)>S){for(var T=0,A=M.length;T<A;){var I=Math.floor((T+A)/2);k(M.substring(0,I))<=S?T=I+1:A=I}M=M.substring(0,Math.max(0,T-1))+"..."}C=x(x({},y),{},{content:M})}o=C?[C].concat(w(P)):P}return o}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;if(t<=0||0===e.length)return e;var r=e.reduce((function(e,t){return e+k(t.content)}),0);if(r<=t)return e;var o=e[0],a="system"===(null==o?void 0:o.role),i=a?o:null,l=a?e.slice(1):e,c=i;if(i){var u=k(i.content);if(u>n){for(var s=0,f=i.content.length;s<f;){var d=Math.floor((s+f)/2),p=i.content.substring(0,d);k(p)<=n?s=d+1:f=d}c=x(x({},i),{},{content:i.content.substring(0,Math.max(0,s-1))+"..."})}}for(var m=c?k(c.content):0,h=t-m,v=[],b=0,g=l.length-1;g>=0;g--){var y=l[g],E=k(y.content);if(!(b+E<=h))break;v.unshift(y),b+=E}return c?[c].concat(v):v}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(54409),n(81832),n(48067),n(58333),n(35837),n(48493),n(82915),n(55378),n(49533),n(74205),n(40882),n(30976),n(15911);var M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"events",{})}var t,n;return t=e,(n=[{key:"addEventListener",value:function(e,t){var n=this.events[e]||[];n.push(t),this.events[e]=n}},{key:"removeEventListener",value:function(e,t){var n=this.events[e]||[],r=n.indexOf(t);n.splice(r,1)}},{key:"dispatch",value:function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(this.events[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t)}catch(e){r.e(e)}finally{r.f()}}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return new z(e)}function A(e){return function(){return new I(e.apply(this,arguments))}}function I(e){var t,n;function r(t,n){try{var a=e[t](n),i=a.value,l=i instanceof z;Promise.resolve(l?i.wrapped:i).then((function(e){l?r("return"===t?"return":"next",e):o(a.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(a,i){var l={key:e,arg:o,resolve:a,reject:i,next:null};n?n=n.next=l:(t=n=l,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function z(e){this.wrapped=e}function R(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new _(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function _(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return _=function(e){this.s=e,this.n=e.next},_.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new _(e)}S(M,"instance",new M),I.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},I.prototype.next=function(e){return this._invoke("next",e)},I.prototype.throw=function(e){return this._invoke("throw",e)},I.prototype.return=function(e){return this._invoke("return",e)};var L=(0,u.createContext)(null),H=u.createContext({});function N(e){var t=e.children,n=(0,u.useContext)(L),r=u.useContext(H),o=(0,h.Z)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3200;return{run:function(a){var i=a.messages;return a.abortSignal,A(regeneratorRuntime.mark((function a(){var l,c,u,s,f,d,p,m,h,v,b,y,x,E;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(l=P(l=i.map((function(e){return{role:e.role,content:e.content[0].text}})),n,r,o),!t){a.next=7;break}return a.next=5,T(t(l,e));case 5:l=P(l=a.sent,n,r,o);case 7:return l=j(l,o||3200,500),a.next=11,T(e.chat.completions.create({messages:l,temperature:1,stream:!0}));case 11:c=a.sent,u="",s=!1,f=!1,a.prev=15,p=R(c);case 17:return a.next=19,T(p.next());case 19:if(!(s=!(m=a.sent).done)){a.next=27;break}return v=m.value,u+=(null===(h=v.choices[0])||void 0===h?void 0:h.delta.content)||"",a.next=24,{status:{type:"running"},content:[{text:u,type:"text"}]};case 24:s=!1,a.next=17;break;case 27:a.next=33;break;case 29:a.prev=29,a.t0=a.catch(15),f=!0,d=a.t0;case 33:if(a.prev=33,a.prev=34,!s||null==p.return){a.next=38;break}return a.next=38,T(p.return());case 38:if(a.prev=38,!f){a.next=41;break}throw d;case 41:return a.finish(38);case 42:return a.finish(33);case 43:return a.next=45,{status:{type:"complete",reason:"stop"},content:[{text:u,type:"text"}]};case 45:if(1!==i.length){a.next=57;break}return a.prev=46,a.next=49,T(e.chat.completions.create({messages:[{role:"system",content:"You are a title generation assistant. Please summarize a short title (no more than 10 words) based on the user's input, without punctuation."},{role:"user",content:i[0].content[0].text}],temperature:.5}));case 49:x=a.sent,(E=null===(b=x.choices[0])||void 0===b||null===(y=b.message.content)||void 0===y?void 0:y.trim())&&M.instance.dispatch(g,{data:E}),a.next=57;break;case 54:a.prev=54,a.t1=a.catch(46),console.error("Failed to generate summary title:",a.t1);case 57:case"end":return a.stop()}}),a,null,[[15,29,33,43],[34,,38,42],[46,54]])})))()}}}(n,r.onBeforeChat,r.maxMessages,r.maxContextLength,r.maxTokens),{adapters:{speech:new v.i}});return u.createElement(b.y,{runtime:o},t)}n(32017);var W=n(33118),D=n(70269),F=n(42313),B=n(64699),Y=n(94360),q=n(86637),U=n(84356),$=n(28148),X=n(49645),G=n(8284),J=n(75692),K=n(10420),Q=n(92294),V=n(65974),ee=n(89574),te=n(44717),ne=n(11601),re=n(35873),oe=n(948),ae=n(47167),ie=n(98479),le=n(53830),ce=n(99228),ue=n(81755),se=n(4708),fe=n(60226),de=n(13912),pe=n(64659),me=n(6921),he=n(24400),ve=n(21668),be=n(63644),ge=n(12509),ye=n(19578),xe=n(65631),Ee=n(87810),we=n(28923),Oe=n(8854),ke=n(30265),Pe=n(3248),je=n(76907),Ze=n(11001),Ce=n(14029),Se=n(35694),Me=n(80473),Te=n(78927),Ae=(n(7889),n(18467)),Ie=n(93217),ze=(n(5032),n(88463),n(73150)),Re=n.n(ze);function _e(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var He,Ne,We,De=n(93591),Fe=n(57293),Be=n(76987),Ye=n(20031),qe=n(31947),Ue=(n(92116),n(51116)),$e=Ue.ZP.div(He||(Ne=["\n  position: relative;\n  width: 452px;\n  overflow: hidden;\n  border-radius: 8px;\n  margin: 8px 0;\n\n  pre {\n    margin: 0 !important;\n    width: 452px;\n    overflow: auto !important;\n    white-space: pre-wrap !important;\n    word-break: break-all !important;\n  }\n\n  .Paste {\n    position: absolute;\n    top: 0.5rem;\n    right: 0.5rem;\n    color: rgb(173, 173, 173);\n    opacity: 0.5;\n    cursor: pointer;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n"],We||(We=Ne.slice(0)),He=Object.freeze(Object.defineProperties(Ne,{raw:{value:Object.freeze(We)}})))),Xe=["children","className"];var Ge=Ae.Z,Je=function(e,t){return Ge.registerLanguage(e,t)};Je("tsx",Be.Z),Je("hs",Fe.Z),Je("cpp",De.Z),Je("go",Ye.Z),Je("python",qe.Z);var Ke,Qe,Ve,et,tt=function(e){var t,n,r,o=e.children,a=e.className,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Xe),l=null==i||null===(t=i.node)||void 0===t||null===(n=t.position)||void 0===n||null===(r=n.start)||void 0===r?void 0:r.line,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){e.on("success",(function(){}))},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,u.useRef)(),o=(0,u.useRef)();return(0,u.useEffect)((function(){var n="Clipboard-Target-".concat(e||Date.now());if(r.current){r.current.setAttribute("data-clipboard-target","#".concat(n)),o.current?o.current.id=n:r.current.id=n;var a=new(Re())(r.current);return t&&t(a),function(){return a.destroy()}}}),[].concat(_e(n),[e])),{button:r,target:o}}("".concat(l));if(/^language-/.test(a)&&o){var s=a.replace(/^language-/,"");return u.createElement($e,null,u.createElement("div",{className:"Paste",ref:c.button},u.createElement(K.Z,null)),u.createElement("div",{ref:c.target},u.createElement(Ge,{language:s,style:Ie.Z},String(o).trim())))}return u.createElement(u.Fragment,null,o)},nt={"zh-CN":{assistantTitle:"AI 助手",newChat:"新对话",tabChat:"对话",tabHistory:"历史列表",loadingModel:"正在初始化模型...",loadingTip:"首次加载模型可能需要较长时间，请耐心等待",noHistory:"暂无历史对话",defaultWelcome:"有什么可以帮忙的？",defaultPlaceholder:"给 GPT 发送消息",defaultEmpty:"我是 AI，可以回答你的问题，请在下方输入框输入你的需求～",cancel:"取消",send:"发送",thinking:"思考中",newChatFallback:"新对话"},"en-US":{assistantTitle:"AI Assistant",newChat:"New Chat",tabChat:"Chat",tabHistory:"History",loadingModel:"Initializing model...",loadingTip:"First load may take a while, please wait patiently",noHistory:"No history",defaultWelcome:"How can I help you?",defaultPlaceholder:"Send a message to GPT",defaultEmpty:"I am an AI, I can answer your questions. Please enter your needs in the input box below~",cancel:"Cancel",send:"Send",thinking:"Thinking...",newChatFallback:"New Chat"}},rt=function(){var e=(0,u.useContext)(H).locale||"zh-CN",t=nt[e]||nt["zh-CN"];return{t:function(e){return t[e]||e},locale:e}},ot=function(e){var t,n=rt().t,r=null==e||null===(t=e.status)||void 0===t?void 0:t.type,o=null==e?void 0:e.text;return"running"!==r||o?u.createElement("div",{style:{marginTop:"-0.5em",maxWidth:"100%",overflow:"hidden",wordBreak:"break-word"}},u.createElement(Me.y,{remarkPlugins:[Se.Z],components:{code:tt}})):u.createElement(Te.Z.Node,{active:!0,style:{width:100,borderRadius:14,height:"38px"}},n("thinking"))},at=(0,u.memo)(ot);function it(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var lt=Ue.ZP.div(Ke||(Ke=it(["\n  box-sizing: border-box;\n  white-space: pre-wrap;\n  word-break: break-word;\n  background-color: var(--ant-color-primary-bg, #eff6ff);\n  color: var(--ant-color-text, #333);\n  border-radius: 14px;\n  padding: 8px 20px;\n\n  & > p {\n    margin-bottom: 0;\n    margin-top: 0;\n  }\n"]))),ct=(0,Ue.ZP)(D.Z)(Qe||(Qe=it(["\n  position: sticky;\n  bottom: 0;\n  padding-top: 16px;\n  background-color: var(--ant-color-bg-elevated, #fff);\n  padding: 0 24px;\n  & > div:nth-child(2) {\n    flex-grow: 1;\n  }\n"]))),ut=(0,Ue.ZP)(D.Z)(Ve||(Ve=it(["\n  width: 100%;\n  & > div:nth-child(1) {\n    flex-grow: 1;\n  }\n"]))),st=(0,Ue.ZP)(ge.g)(et||(et=it(["\n  display: block;\n  width: 100%;\n  padding: 12px 16px;\n  background-color: var(--ant-color-fill-tertiary, #f7f7f8);\n  border-radius: 12px;\n  border: 1px solid var(--ant-color-border, #d1d5db);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  outline: none;\n  font-family: inherit;\n  font-size: 14px;\n  color: var(--ant-color-text, #333);\n  min-height: 44px;\n  max-height: 200px;\n  resize: none;\n  overflow-y: auto;\n  box-sizing: border-box;\n\n  &:focus {\n    background-color: var(--ant-color-bg-container, #fff);\n    border-color: var(--ant-color-primary, #1890ff);\n    box-shadow: 0 0 0 2px var(--ant-color-primary-hover, rgba(24, 144, 255, 0.1));\n  }\n\n  &::placeholder {\n    color: var(--ant-color-text-placeholder, #bfbfbf);\n  }\n"]))),ft=["className"];function dt(){return dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt,bt,gt,yt=function(){var e=(0,u.useContext)(H),t=rt().t;return u.createElement(we.u,{style:{height:"100%"}},u.createElement(Oe.W,{style:{height:"100%",overflowY:"scroll"}},u.createElement("div",{style:{display:"flex",flexDirection:"column",minHeight:"100%"}},u.createElement("div",{style:{flexGrow:1,paddingBottom:24}},u.createElement("div",{style:{padding:"0px 24px"}},u.createElement(Et,null),u.createElement(ke.v,{components:{UserMessage:jt,EditComposer:Ct,AssistantMessage:St}}),u.createElement(Pe.M,{empty:!0},u.createElement(W.Z,{style:{margin:"16px 0px",maxWidth:"100%"},type:"warning",message:e.emptyMessage||t("defaultEmpty")})))),u.createElement(ct,{style:{width:"100%",boxSizing:"border-box",paddingBottom:16}},u.createElement(xt,null),u.createElement(Ot,null)))))},xt=function(){return u.createElement(je.X,{asChild:!0},u.createElement(i.ZP,{style:{width:"47px",height:"47px",borderRadius:12},type:"dashed",icon:u.createElement(q.Z,null)}))},Et=function(){var e=(0,u.useContext)(H),t=rt().t;return u.createElement(Ze.D,null,u.createElement(W.Z,{style:{maxWidth:"100%"},message:e.welcomeMessage||t("defaultWelcome")}),u.createElement(wt,null))},wt=function(){var e=(0,u.useContext)(H),t=rt(),n=(t.t,t.locale),r=e.suggestions||("zh-CN"===n?["如何用 Typescript 实现 Helloworld？","物联网是什么？"]:["How to implement Helloworld in Typescript?","What is IoT?"]);return u.createElement(D.Z,{style:{marginTop:24}},r.map((function(e,t){return u.createElement(Ce.w,{key:t,prompt:e,method:"replace",style:{border:"none",padding:0},autoSend:!0},u.createElement(F.Z,{style:{borderRadius:0},hoverable:!0},e))})))},Ot=function(){var e=(0,u.useContext)(H),t=rt().t;return u.createElement(he.d,null,u.createElement(ut,null,u.createElement(st,{rows:1,autoFocus:!0,placeholder:e.placeholder||t("defaultPlaceholder")}),u.createElement(Pt,null)))},kt=function(){var e=(0,Y.Z)({continuous:!0,useLegacyResults:!1}),t=e.error,n=e.interimResult,r=e.isRecording,o=(e.results,e.startSpeechToText),a=e.stopSpeechToText,l=(0,re.$u)();return(0,u.useEffect)((function(){n&&l.composer.setText(n)}),[n]),t?(console.log("Web Speech API is not available in this browser.",t),u.createElement(u.Fragment,null)):u.createElement(i.ZP,{style:{width:"47px",height:"47px",borderRadius:12},onClick:function(){r?a():o()},icon:r?u.createElement(f.Z,null):u.createElement(U.Z,null)})},Pt=function(){return u.createElement(u.Fragment,null,u.createElement(Pe.M,{running:!1},u.createElement(D.Z,null,u.createElement(ve.n,{asChild:!0},u.createElement(i.ZP,{style:{width:"47px",height:"47px",borderRadius:12},icon:u.createElement($.Z,null)})),u.createElement(kt,null))),u.createElement(Pe.M,{running:!0},u.createElement(be.y,{asChild:!0},u.createElement(i.ZP,{style:{width:"47px",height:"47px",borderRadius:12},icon:u.createElement(X.Z,null)}))))},jt=function(){return u.createElement(ye.i,{style:{display:"flex",justifyContent:"flex-end",marginTop:16}},u.createElement(D.Z,{align:"start"},u.createElement("div",null,u.createElement(D.Z,null,u.createElement(Zt,null),u.createElement(lt,null,u.createElement(xe.Y,null))),u.createElement(Tt,{style:{marginTop:8}})),u.createElement(B.Z,null,"Y")))},Zt=function(){return u.createElement(oe.P,{hideWhenRunning:!0,autohide:"not-last"},u.createElement(ae.h,{asChild:!0},u.createElement(G.Z,null)))},Ct=function(){var e=rt().t;return u.createElement(he.d,{style:{padding:"16px 8px"}},u.createElement(ge.g,{style:ht({width:"100%",height:300,boxSizing:"border-box",whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"#eff6ff",borderRadius:"14px",border:"none",padding:"8px 20px"},"borderRadius","14px")}),u.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},u.createElement(D.Z,null,u.createElement(be.y,{asChild:!0},u.createElement(i.ZP,{type:"default",size:"small"},e("cancel"))),u.createElement(ve.n,{asChild:!0},u.createElement(i.ZP,{type:"primary",size:"small"},e("send"))))))},St=function(){return u.createElement(ye.i,{style:{marginTop:16}},u.createElement(D.Z,{align:"start"},u.createElement(B.Z,null,"AI"),u.createElement("div",{style:{display:"inline-block"}},u.createElement(xe.Y,{components:{Text:at}}),u.createElement(Mt,null),u.createElement(Tt,null))))},Mt=function(){return u.createElement(oe.P,{hideWhenRunning:!0,autohide:"not-last",autohideFloat:"single-branch",style:{marginTop:8}},u.createElement(D.Z,null,u.createElement(ie.v,{asChild:!0},u.createElement("div",{style:{cursor:"pointer"}},u.createElement(Ee.m,{copied:!0},u.createElement(J.Z,null)),u.createElement(Ee.m,{copied:!1},u.createElement(K.Z,null)))),u.createElement(le.g,{asChild:!0},u.createElement(Q.Z,null)),u.createElement(Ee.m,{speaking:!0},u.createElement(ce.I,{asChild:!0},u.createElement(V.Z,null))),u.createElement(Ee.m,{speaking:!1},u.createElement(ue.p,{asChild:!0},u.createElement(ee.Z,null)))))},Tt=function(e){e.className;var t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ft);return u.createElement(se.v,dt({hideWhenSingleBranch:!0,style:mt({marginTop:8},t.style||{})},t),u.createElement(fe.L,{asChild:!0},u.createElement(te.Z,null)),u.createElement("span",null,u.createElement(de.N,null)," / ",u.createElement(pe.C,null)),u.createElement(me.v,{asChild:!0},u.createElement(ne.Z,null)))},At=n(83101),It=n(86040),zt=n(14042),Rt=n(32629),_t=n(33134),Lt=n(246),Ht=n(38666),Nt=n(25467),Wt=n(43449),Dt=n(74207);function Ft(){return Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ft.apply(this,arguments)}function Bt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Yt=(0,Ue.ZP)(Lt.E)(vt||(vt=Bt(["\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid var(--ant-color-border-secondary, #f0f0f0);\n  background: var(--ant-color-fill-quaternary, #fafafa);\n  color: var(--ant-color-text, inherit);\n\n  &:hover {\n    background-color: var(--ant-color-fill-tertiary, #f5f5f5);\n    border-color: var(--ant-color-border, #d9d9d9);\n  }\n\n  &[data-active='true'] {\n    background-color: var(--ant-color-primary-bg, #e6f7ff);\n    border-color: var(--ant-color-primary-border, #91d5ff);\n    color: var(--ant-color-primary, #1890ff);\n  }\n"]))),qt=(0,Ue.ZP)(Ht.A)(bt||(bt=Bt(["\n  border: none;\n  padding: 0;\n  background: transparent;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n  text-align: left;\n  cursor: pointer;\n  font-size: 14px;\n  color: inherit;\n"]))),Ut=(0,Ue.ZP)(Nt.s)(gt||(gt=Bt(["\n  margin-left: 8px;\n  color: #bfbfbf;\n  transition: all 0.2s;\n  padding: 4px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    color: #ff4d4f;\n    background-color: rgba(255, 77, 79, 0.1);\n  }\n"]))),$t=function(e){var t=e.onItemClick;return u.createElement(Rt.k,{style:{display:"flex",flexDirection:"column"}},u.createElement(Xt,{onItemClick:t}))},Xt=function(e){var t=e.onItemClick,n=(0,It.zx)().threads.getState().threads,r=rt().t;return u.createElement(u.Fragment,null,u.createElement(_t.h,{components:{ThreadListItem:function(e){return u.createElement(Gt,Ft({},e,{onClick:t}))}}}),0===n.length&&u.createElement(Dt.Z,{description:r("noHistory"),style:{marginTop:48}}))},Gt=function(e){var t=e.onClick;return u.createElement(Yt,null,u.createElement(qt,{onClick:t},u.createElement(Jt,null)),u.createElement(Kt,null))},Jt=function(){var e=(0,zt.VJ)(),t=rt().t;return(0,u.useEffect)((function(){var t=function(t){e.getState().isMain&&e.rename(t.data)};return M.instance.addEventListener(g,t),function(){M.instance.removeEventListener(g,t)}}),[e]),u.createElement(Wt.S,{fallback:u.createElement("div",null,t("newChatFallback"))})},Kt=function(){return u.createElement(Ut,{asChild:!0},u.createElement(At.Z,null))},Qt=n(92759);function Vt(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var en,tn,nn,rn,on,an,ln=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedModel,r=void 0===n?"Llama-3.1-8B-Instruct-q4f32_1-MLC":n,o=t.initProgressCallback,e.next=3,(0,Qt.DN)(r,{initProgressCallback:o});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Vt(a,r,o,i,l,"next",e)}function l(e){Vt(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();function cn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Ue.ZP.div(en||(en=cn(["\n  padding: 48px;\n"]))),Ue.ZP.div(tn||(tn=cn(["\n  margin: 48px;\n  border-radius: 4px;\n  border: 1px solid #e5e5e5;\n  display: flex;\n  height: 600px;\n  background-color: #fff;\n"]))),Ue.ZP.div(nn||(nn=cn(["\n  display: none;\n"]))),Ue.ZP.div(rn||(rn=cn(["\n  padding: 12px 0px;\n  flex-grow: 1;\n"]))),Ue.ZP.div(on||(on=cn(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  font-size: 18px;\n  color: #999;\n"])));var un,sn,fn,dn,pn,mn,hn,vn,bn=Ue.ZP.div(an||(an=cn(["\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  border-radius: 28px;\n  background: linear-gradient(135deg, #1890ff 0%, #0050b3 100%);\n  box-shadow: 0 4px 16px rgba(24, 144, 255, 0.35);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: grab;\n  z-index: 1000;\n  color: #fff;\n  font-size: 24px;\n  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(4px);\n\n  &:active {\n    cursor: grabbing;\n  }\n\n  &:hover {\n    transform: scale(1.1) rotate(5deg);\n    background: linear-gradient(135deg, #40a9ff 0%, #096dd9 100%);\n    box-shadow: 0 8px 24px rgba(24, 144, 255, 0.45);\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: -2px;\n    left: -2px;\n    right: -2px;\n    bottom: -2px;\n    border-radius: 30px;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0) 100%);\n    opacity: 0.5;\n    pointer-events: none;\n  }\n\n  .anticon {\n    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));\n  }\n"])));function gn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var yn=Ue.ZP.div(un||(un=gn(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-right: 24px;\n"]))),xn=Ue.ZP.div(sn||(sn=gn(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 0 40px;\n"]))),En=Ue.ZP.div(fn||(fn=gn(["\n  margin-top: 24px;\n  font-size: 16px;\n  color: var(--ant-color-text-description, #666);\n  text-align: center;\n"]))),wn=Ue.ZP.div(dn||(dn=gn(["\n  margin-top: 8px;\n  font-size: 12px;\n  color: var(--ant-color-text-quaternary, #999);\n"]))),On=Ue.ZP.div(pn||(pn=gn(["\n  display: ",";\n  height: calc(100vh - 160px);\n"])),(function(e){return e.active?"block":"none"})),kn=Ue.ZP.div(mn||(mn=gn(["\n  display: ",";\n  height: calc(100vh - 160px);\n  overflow-y: auto;\n"])),(function(e){return e.active?"block":"none"})),Pn=Ue.ZP.div(hn||(hn=gn(["\n  padding: 12px 0;\n  text-align: center;\n  font-size: 12px;\n  color: var(--ant-color-text-quaternary, #bfbfbf);\n  border-top: 1px solid var(--ant-color-border-secondary, #f0f0f0);\n  background-color: var(--ant-color-bg-elevated, #fff);\n  z-index: 1;\n"]))),jn=Ue.ZP.a(vn||(vn=gn(["\n  color: var(--ant-color-text-quaternary, #bfbfbf);\n  text-decoration: underline;\n"])));function Zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sn=function(e){var t=e.config,n=Zn((0,u.useState)(!1),2),a=n[0],i=n[1],l=Zn((0,u.useState)("chat"),2),c=l[0],s=l[1],f=Zn((0,u.useState)((function(){return"function"==typeof t.theme?t.theme():t.theme||"light"})),2),d=f[0],p=f[1];return(0,u.useEffect)((function(){a&&"function"==typeof t.theme&&p(t.theme())}),[a,t.theme]),u.createElement(H.Provider,{value:t},u.createElement(r.ZP,{theme:{algorithm:"dark"===d?o.Z.darkAlgorithm:o.Z.defaultAlgorithm}},u.createElement(Mn,{open:a,setOpen:i,activeTab:c,setActiveTab:s,config:t})))},Mn=function(e){var t=e.open,n=e.setOpen,r=e.activeTab,o=e.setActiveTab,s=e.config,h=rt().t,v=Zn((0,u.useState)(h("loadingModel")),2),b=v[0],g=v[1],y=Zn((0,u.useState)(0),2),x=y[0],E=y[1],w=Zn((0,u.useState)(!1),2),O=w[0],k=w[1],P=Zn((0,u.useState)(null),2),j=P[0],Z=P[1],C=s.initialPosition||{x:window.innerWidth-100,y:window.innerHeight-100},S=Zn((0,u.useState)(C),2),M=S[0],T=S[1],A=Zn((0,u.useState)(!1),2),I=A[0],z=A[1],R=u.useRef({x:0,y:0}),_=u.useRef(C),H=u.useRef({width:window.innerWidth,height:window.innerHeight});return(0,u.useEffect)((function(){var e=function(){var e=window.innerWidth,t=window.innerHeight;T((function(n){var r=n.x>H.current.width/2,o=n.x;if(r){var a=H.current.width-n.x;o=e-a}var i=n.y>H.current.height/2,l=n.y;if(i){var c=H.current.height-n.y;l=t-c}var u=Math.max(20,Math.min(o,e-84)),s=Math.max(20,Math.min(l,t-84));return _.current={x:u,y:s},{x:u,y:s}})),H.current={width:e,height:t}};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,u.useEffect)((function(){j||O||g(h("loadingModel"))}),[h,j,O]),(0,u.useEffect)((function(){!t||j||O||(k(!0),ln({selectedModel:"Qwen2.5-Coder-0.5B-Instruct-q4f16_1-MLC",initProgressCallback:function(e){g(e.text),E(Math.round(100*e.progress)),1===e.progress&&k(!1)}}).then((function(e){Z(e)})).catch((function(e){console.error("Failed to load LLM engine:",e),k(!1)})))}),[t,j,O]),u.createElement(L.Provider,{value:j},u.createElement(N,null,u.createElement(bn,{onClick:function(){I||n(!0)},onMouseDown:function(e){z(!1),R.current={x:e.clientX,y:e.clientY};var t=function(e){var t=Math.abs(e.clientX-R.current.x),n=Math.abs(e.clientY-R.current.y);if((t>5||n>5)&&z(!0),I||t>5||n>5){var r=e.clientX-32,o=e.clientY-32;T({x:r,y:o}),_.current={x:r,y:o}}};document.addEventListener("mousemove",t),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e);var n=window.innerWidth/2,r=_.current.x<n?20:window.innerWidth-84,o=_.current.y;o<20&&(o=20),o>window.innerHeight-84&&(o=window.innerHeight-84),T({x:r,y:o}),_.current={x:r,y:o}}))},style:{left:M.x,top:M.y,bottom:"auto",right:"auto",transition:I?"none":"all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)",userSelect:"none",touchAction:"none",opacity:t?0:1,pointerEvents:t?"none":"auto",transform:t?"scale(0) rotate(-20deg)":I?"scale(1.05)":"scale(1)"}},O&&!j?u.createElement(f.Z,null):u.createElement(d.Z,null)),u.createElement(a.Z,{title:u.createElement(yn,null,u.createElement("span",null,h("assistantTitle")),!O&&j&&u.createElement(m.R,{asChild:!0},u.createElement(i.ZP,{type:"text",icon:u.createElement(p.Z,null),onClick:function(){return o("chat")}},h("newChat")))),placement:"right",onClose:function(){n(!1)},open:t,width:600,bodyStyle:{padding:"0 16px",display:"flex",flexDirection:"column"}},O||!j?u.createElement(xn,null,u.createElement(l.Z,{type:"circle",percent:x,strokeColor:{"0%":"#108ee9","100%":"#87d068"}}),u.createElement(En,null,b),u.createElement(wn,null,h("loadingTip"))):u.createElement(u.Fragment,null,u.createElement(c.Z,{activeKey:r,onChange:o,items:[{key:"chat",label:h("tabChat")},{key:"history",label:h("tabHistory")}]}),u.createElement("div",{style:{flex:1,position:"relative",overflow:"hidden"}},u.createElement(On,{active:"chat"===r},u.createElement(yt,null)),u.createElement(kn,{active:"history"===r},u.createElement($t,{onItemClick:function(){return o("chat")}})))),u.createElement(Pn,null,"Powered by ",u.createElement(jn,{href:"https://github.com/Saber2pr/ai-assistant/",target:"_blank",rel:"noreferrer"},"ai-assistant")))))};var Tn=document.createElement("h1");Tn.textContent="Click the bottom right sidebar button to open the AI assistant",document.body.append(Tn),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t||document.body,r=document.createElement("div");r.id=e.containerId||"ai-assistant-root",n.appendChild(r),s.render(u.createElement(Sn,{config:e}),r)}({locale:"zh-CN"})}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.m=r,e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(s=0;s<e.length;s++){for(var[n,r,o]=e[s],l=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,l,c]=n,u=0;if(i.some((t=>0!==e[t]))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(c)var s=c(a)}for(t&&t(n);u<i.length;u++)o=i[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(s)},n=self.webpackChunk_saber2pr_ai_assistant=self.webpackChunk_saber2pr_ai_assistant||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[216],(()=>a(67652)));i=a.O(i)})();